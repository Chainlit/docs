---
title: "on_profile_switch"
---

Hook to react when a user switches between ChatProfiles. Enables dynamic, session-specific configuration updates at runtime.

## Usage

```python
import chainlit as cl
from chainlit.types import ChatProfile

@cl.on_profile_switch
async def handle_profile_switch(profile: ChatProfile):
	if profile.name == "vision-model":
		await cl.update_config({
			"features": {
				"spontaneous_file_upload": {
					"enabled": True,
					"accept": ["image/*"],
					"max_files": 5
				}
			},
			"ui": {
				"name": f"Vision Assistant ({profile.name})"
			}
		})
	elif profile.name == "text-model":
		await cl.update_config({
			"features": {
				"spontaneous_file_upload": {
					"enabled": False
				}
			},
			"ui": {
				"name": "Text Assistant"
			}
		})
```

## Dynamic Configuration

Update config at runtime for the current session:

```python
await cl.update_config({
	"features": {
		"latex": True,
		"spontaneous_file_upload": {
			"enabled": True,
			"max_files": 10,
			"max_size_mb": 50
		}
	},
	"ui": {
		"name": "Custom Assistant Name",
		"description": "Updated description"
	}
})
```

## Access Session Config

```python
current_config = cl.get_session_config()
if current_config.features.spontaneous_file_upload.enabled:
	await cl.Message("File uploads are enabled!").send()
```

## Example: Model-specific Capabilities

```python
@cl.on_profile_switch
async def configure_for_model(profile: ChatProfile):
	if "vision" in profile.name:
		await cl.update_config({
			"features": {
				"spontaneous_file_upload": {
					"enabled": True,
					"accept": ["image/*"]
				}
			}
		})
	elif "code" in profile.name:
		await cl.update_config({
			"features": {
				"spontaneous_file_upload": {
					"enabled": True,
					"accept": ["text/*", "application/json"]
				}
			}
		})
```

## Notes

- Each session maintains its own config overrides
- Existing config.toml files remain compatible
- Use `cl.get_session_config()` to read the effective config
